<!DOCTYPE html>

<html lang="ja">

<head>
 <meta charset="UTF-8">
 <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
 <title>My favorite BGM</title>
 <link rel="icon" type="image/png" href="./Photo Folder/favicon.jpeg">

 <!-- PWA / iOS Web App 対応 -->
 <meta name="apple-mobile-web-app-capable" content="yes">
 <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
 <meta name="apple-mobile-web-app-title" content="My BGM">
 <meta name="mobile-web-app-capable" content="yes">
 <meta name="theme-color" content="#0d7377">

 <!-- iOS ホーム画面アイコン -->
 <link rel="apple-touch-icon" href="./Photo Folder/favicon.jpeg">

 <!-- Web App Manifest（インラインBlob で生成） -->
 <link rel="manifest" id="manifest-placeholder">

 <style>
  * {
   margin: 0;
   padding: 0;
   box-sizing: border-box;
   -webkit-tap-highlight-color: transparent;
  }

  body {
   font-family: 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
   background: linear-gradient(135deg, #0d7377 0%, #14a085 100%);
   min-height: 100vh;
   min-height: -webkit-fill-available;
   display: flex;
   flex-direction: column;
   overflow-x: hidden;
   -webkit-overflow-scrolling: touch;
  }

  header {
   background-color: rgba(0, 0, 0, 0.8);
   color: white;
   padding: calc(40px + env(safe-area-inset-top)) 60px 40px;
   box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
   width: 100vw;
   position: relative;
   left: 50%;
   right: 50%;
   margin-left: -50vw;
   margin-right: -50vw;
  }

  header h1 {
   font-size: 28px;
   margin-bottom: 10px;
   letter-spacing: 2px;
  }

  header nav p {
   font-size: 14px;
   color: #ccc;
   letter-spacing: 1px;
  }

  .container {
   flex: 1;
   max-width: 100%;
   margin: 20px 15px;
   padding: 30px 20px;
   background-color: white;
   border-radius: 15px;
   box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
  }

  .title01 {
   font-size: 32px;
   font-weight: bold;
   text-align: center;
   color: #0d7377;
   margin-bottom: 10px;
   text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  }

  .title02 {
   font-size: 24px;
   font-weight: bold;
   text-align: center;
   color: #0a5458;
   margin-bottom: 30px;
   padding-bottom: 15px;
   border-bottom: 3px solid #14a085;
  }

  .audio-section {
   margin: 20px 0;
   padding: 20px;
   background-color: #f8f9fa;
   border-radius: 10px;
   border-left: 5px solid #0d7377;
   transition: all 0.3s ease;
  }

  .audio-section:hover {
   background-color: #e9ecef;
   transform: translateX(5px);
  }

  @media (hover: none) {
   .audio-section:hover {
    background-color: #f8f9fa;
    transform: none;
   }
   .audio-section:active {
    background-color: #e9ecef;
   }
  }

  .audio-section p {
   font-size: 16px;
   font-weight: bold;
   color: #333;
   margin-bottom: 12px;
  }

  audio {
   width: 100%;
   margin-top: 5px;
   border-radius: 5px;
   outline: none;
   height: 40px;
   min-height: 40px;
   display: block;
  }

  audio::-webkit-media-controls-panel {
   background-color: #0d7377;
  }

  footer {
   background-color: rgba(0, 0, 0, 0.9);
   color: white;
   text-align: center;
   padding: 40px 60px calc(40px + env(safe-area-inset-bottom));
   margin-top: auto;
   width: 100vw;
   position: relative;
   left: 50%;
   right: 50%;
   margin-left: -50vw;
   margin-right: -50vw;
  }

  footer p {
   margin: 5px 0;
   font-size: 14px;
  }

  footer p:first-child {
   font-size: 12px;
   color: #aaa;
  }

  footer p:last-child {
   font-weight: bold;
   letter-spacing: 1px;
  }

  /* タブレット用 */
  @media (min-width: 600px) and (max-width: 1024px) {
   .container {
    margin: 25px 30px;
    padding: 35px 25px;
   }
  }

  /* PC・大画面用 */
  @media (min-width: 1025px) {
   .container {
    max-width: 100%;
    margin: 20px 40px;
    padding: 40px 60px;
   }
  }

  /* スマートフォン用 */
  @media (max-width: 599px) {
   header {
    padding: calc(30px + env(safe-area-inset-top)) 20px 30px;
   }

   header h1 {
    font-size: 22px;
   }

   .container {
    margin: 15px 10px;
    padding: 25px 15px;
   }

   .title01 {
    font-size: 26px;
   }

   .title02 {
    font-size: 20px;
   }

   .audio-section {
    padding: 12px;
    margin: 15px 0;
   }

   .audio-section p {
    font-size: 14px;
   }
  }
 </style>
</head>


<body>

 <!-- ヘッダー -->
 <header>
  <h1>My favorite BGM</h1>
  <nav>
   <p>Made by sh1n*</p>
  </nav>
 </header>


 <!-- メインコンテンツ -->

 <div class="container">
  <p class="title01">Music by しゃろう</p>
  <p class="title02"></p>

  <div class="audio-section">
   <p>superstar</p>
   <audio src="./Music Folder/0101.mp3" controls loop></audio>
  </div>

  <div class="audio-section">
   <p>You and Me</p>
   <audio src="./Music Folder/0102.mp3" controls loop></audio>
  </div>
 </div>


 <div class="container">
  <p class="title01">Music by 騒音のない世界</p>
  <p class="title02"></p>

  <div class="audio-section">
   <p>それゆけワンダーランド</p>
   <audio src="./Music Folder/0201.mp3" controls loop></audio>
  </div>

  <div class="audio-section">
   <p>裸の王様</p>
   <audio src="./Music Folder/0202.mp3" controls loop></audio>
  </div>
 </div>


 <div class="container">
  <p class="title01">Music by プロセカ</p>
  <p class="title02"></p>

  <div class="audio-section">
   <p>Mr. Showtime（Vocal OFF）</p>
   <audio src="./Music Folder/0301.mp3" controls loop></audio>
  </div>
 </div>


 <div class="container">
  <p class="title01">Music by 呼び込みくん</p>
  <p class="title02"></p>

  <div class="audio-section">
   <p>呼び込みくん</p>
   <audio src="./Music Folder/0401.mp3" controls loop></audio>
  </div>
 </div>


 <!-- フッター -->
 <footer>
  <p>&copy;sh1n*</p>
 </footer>

 <script>
  // ── Web App Manifest をインラインBlobで生成・注入 ──
  const manifestData = {
   name: "My favorite BGM",
   short_name: "My BGM",
   description: "sh1n* のお気に入りBGMプレイヤー",
   start_url: "./index.html",
   display: "standalone",
   background_color: "#0d7377",
   theme_color: "#0d7377",
   orientation: "portrait-primary",
   icons: [
    { src: "./Photo Folder/favicon.jpeg", sizes: "192x192", type: "image/jpeg", purpose: "any maskable" },
    { src: "./Photo Folder/favicon.jpeg", sizes: "512x512", type: "image/jpeg", purpose: "any maskable" }
   ]
  };
  const manifestBlob = new Blob([JSON.stringify(manifestData)], { type: 'application/json' });
  document.getElementById('manifest-placeholder').href = URL.createObjectURL(manifestBlob);

  // ── Service Worker をインラインBlobで生成・登録 ──
  if ('serviceWorker' in navigator) {
   const swCode = `
    const CACHE_NAME = 'my-bgm-v1';
    self.addEventListener('install', event => {
     self.skipWaiting();
    });
    self.addEventListener('activate', event => {
     event.waitUntil(
      caches.keys().then(keys =>
       Promise.all(keys.filter(k => k !== CACHE_NAME).map(k => caches.delete(k)))
      )
     );
     self.clients.claim();
    });
    self.addEventListener('fetch', event => {
     // 音楽ファイルは常にネットワークから取得
     if (event.request.url.endsWith('.mp3')) {
      event.respondWith(fetch(event.request));
      return;
     }
     // その他はキャッシュ優先
     event.respondWith(
      caches.open('${CACHE_NAME}').then(cache =>
       cache.match(event.request).then(cached => {
        const fetched = fetch(event.request).then(res => {
         cache.put(event.request, res.clone());
         return res;
        });
        return cached || fetched;
       })
      )
     );
    });
   `;
   const swBlob = new Blob([swCode], { type: 'application/javascript' });
   navigator.serviceWorker.register(URL.createObjectURL(swBlob), { scope: './' })
    .then(reg => console.log('SW registered:', reg.scope))
    .catch(err => console.warn('SW registration failed:', err));
  }
 </script>

</body>

</html>
